# 协作流程与规范

## Git 分支策略
- `main`：仅存放稳定可发布版本。所有合并到 `main` 的改动必须经过测试与 Code Review。
- `develop`：日常集成分支，功能合并后在此联调。保持与 `main` 同步，定期从 `main` 拉取或合并。
- `feature/<name>`：针对单一需求或缺陷的新分支，基于 `develop` 创建，完成后发起合并请求（Pull Request）。
- `hotfix/<name>`：从 `main` 切出用于紧急修复，修复完成后同时合并回 `main` 和 `develop`。
- 提交信息遵循 “type: summary” 格式，例如 `feat: add home quick links`、`fix: handle unity init error`。

## 提交流程
1. 从最新的 `develop` 拉取代码：`git checkout develop && git pull`.
2. 创建功能分支：`git checkout -b feature/<feature-name>`.
3. 开发过程中保持提交原子化、语义化，并在合并前执行本地自检：
   ```bash
   npm run lint -- --max-warnings=0
   npm run typecheck
   npm test -- --watchAll=false --passWithNoTests
   ```
4. 提交前使用 `git status` 确认没有遗漏文件。

## Code Review 约定
- 每个功能分支需通过 Pull Request 合并到 `develop`。
- PR 描述包括：
  - 变更摘要与背景
  - 自检清单（lint/typecheck/test/真机验证等）
  - 相关截图或录屏（如涉及 UI）
- Reviewer 检查：
  - 功能实现是否符合需求
  - 是否存在潜在风险或遗漏测试
  - 代码风格与架构是否一致
- 通过 Review 后合并，并删除远程功能分支。

## Copilot 与 AI 助手使用
- 在代码中写清楚意图（注释、函数签名、TODO）后再调用 Copilot，提升建议质量。
- 接受建议前自行审查逻辑、边界条件与类型声明；关键或安全敏感代码尽量手写。
- 定期记录 Copilot 生成的关键代码片段及运行结果，避免黑箱实现。
- 若发现错误建议，及时在 PR 中标注，提醒其他人避免误用。

## Issue / 任务管理
- 使用 GitHub Projects 或 Issue 看板跟踪任务状态：
  - `Todo`：未开始
  - `In Progress`：开发中
  - `Review`：待 Code Review / 测试
  - `Done`：已合并并验证
- Issue 模板至少包含：背景、需求点、验收标准、关联 PR。
- 每周同步一次进度，更新《开发计划》中的完成勾选与备注。

## 变更记录与发布
- 发布前在 `develop` 上打 tag（如 `v0.1.0-beta`），并更新 ChangeLog。
- 重大变更（链上交互、Unity 桥接）需额外说明回滚方案。
- 发布后收集反馈，若发现问题，按 `hotfix` 流程快速修复。
