# 开发计划
## 阶段划分与目标
| 阶段 | 目标 | 关键产出 | 预计时长 |
| --- | --- | --- | --- |
| 阶段 1：技术验证与框架搭建 | 完成 React Native Bare + Unity 的基础集成验证，搭建项目骨架与协作流程 | RN Bare 初始工程、Unity 占位场景、消息桥接 PoC、基础文档 | 2 周 |
| 阶段 2：核心功能 MVP | 落地首页、试炼、我的模块基础功能，串联链上数据展示流程 | RN 导航 + UI、Unity 试炼场景交互、链上余额 + 道具查询、端到端 Demo | 4 周 |
| 阶段 3：功能拓展与优化 | 丰富探索与链上数据模块，替换正式美术资源并优化性能 | 探索内容、排行榜/NFT 功能、正式 3D 资源、性能报告 | 4-6 周 |
| 阶段 4：测试与发布准备 | 完成全面测试与发布所需材料 | 测试用例与报告、CI/CD 流水线、上架物料与用户文档 | 2 周 |

## 近期改动记录
- 2025-11-10：重构系统与支持（设置）全链路，新建 SettingSection/SettingRow/SkeletonBlock 组件与 Language / Notifications / FundsRecord 子页，整合霓虹玻璃 UI、外链复制、危险区样式及 @react-native-clipboard/clipboard 复制能力。
- 2025-11-10：重构“我的邀请”页，新增 InviteScreen 及 InviteSummaryCard/InviteToolbar/InviteRecordItem/InviteDetailSheet、mock 数据与 NeonPanel 玻璃卡，支持筛选、排序、骨架空态与二维码占位。
- 2025-11-10：完成排行榜霓虹玻璃化重构，拆分 HeroCard/RankSegments/TopThree/RankGrid/RankRow/SeasonRewards 组件，统一 bg_common 占位底纹 + 金银铜 tint，并加上 GlowButton、useBottomGutter、滚动回到我的排名等交互。
- 2025-11-10：实现仓库（背包）全新 UI，新建 InventoryScreen、CategoryChips、Toolbar、ItemSlot、SkeletonGrid、mock/inventory 与 neon theme，补齐物品/稀有度贴图，MyInventoryScreen 直接复用。
- 2025-11-10：我的页面指挥中心与首页背景/ARC/矿石布局保持一致，齿轮入口替换网络状态、作战指标仅保留“矿工”“链鉴”，移动收藏亮点到指挥中心下方竖卡滑动，并放大齿轮可点击反馈。
- 2025-11-10：底部导航精简为“首页/试炼/探索/我的”，ProfileNavigator 新入口承接齿轮跳转；新增 useBottomGutter Hook 并应用到主要 Scroll/List，统一 paddingBottom / contentInset，避免底栏掩盖内容。
- 2025-11-09：落地“我的页 v2”霓虹骨架（指挥中心资产卡、指标格、功能矩阵、收藏横滑、设置与 KYC 提示），新增 Wallet/Member/Reports/Highlights/KYC 子路由与 i18n 键。
- 2025-11-04：恢复首页无自定义背景版本，移除 HomeBackground 覆盖，仅保留 ScreenContainer 默认渐变。
- 2025-11-04：调整首页卡片与指挥中心光效，收紧背景雾化与噪点，修复卡片虚框问题并统一拟物层次。
- 2025-11-04：重塑排行榜界面，新增领奖台区、我的排名霓虹卡片、奖励图文卡以及霓虹分段控件和滚动定位交互。
- 2025-11-03：新增 `forge` / `market` Redux slice 及 mock API，`ForgeScreen`、`MarketplaceScreen` 接入全局状态并实现基础栅格与卡片布局。
- 2025-11-03：统一 Prettier 行尾为 `lf` 并清理 CRLF 告警，底部导航改为静态配置表以消除 `react/no-unstable-nested-components`。
- 2025-11-03：修正排行榜摘要文案与前三名排名展示、补齐活动商城价格区块渲染细节。
- 2025-11-03：重构「我的」主页面及战队/邀请子页，统一霓虹拟物布局、补充资产条与操作入口。
- 2025-11-04：落地斜框主题组件（TiltFrame/NeonButton/BottomNav），重写首页为倾斜卡布局并新增 BlindBoxScreen 承载 Unity 盲盒流程。
- 2025-11-05：完善 HomeScreen 斜框排版，放大指挥中心与盲盒舞台、统一功能卡 2×2 栅格，并为 ParallelogramPanel 与盲盒 CTA 注入呼吸 + 扫描动效。
- 2025-11-06：实现 QuickGlyph SVG 图标体系，指挥中心资源条、四卡快捷入口与底栏替换霓虹线稿，卡片内部新增渐变噪点背景，文字样式统一为赛博科技风格。
- 2025-11-07：收敛设计 Tokens（主色/辅色/圆角/阴影）与 typography 体系，重构底部导航玻璃拟态与全屏霓虹背景，并落地统一字体/色彩规范。
- 2025-11-07：为首页接入骨架屏、指挥中心网络状态、新锁定态卡片与盲盒 CTA，背景素材全部转换为 WebP 并统一遮罩亮度，弱网下仍可操作。
- 2025-11-08：实现首页背景漂移 + 粒子层、扫描线、资产/网络呼吸动效、锁定角标与进度假动效、CTA 脉冲与统一点击波纹，并上线骨架屏与 WebP 资源压缩。

## 任务清单

### 阶段 1 待办
- [x] 初始化 React Native Bare 项目骨架（Android/iOS）
- [ ] 集成 Unity 占位场景，生成 Android AAR 与 iOS Framework
- [ ] 搭建 React Native ↔ Unity 消息桥（示例：启动场景、回传状态）
- [x] 构建初步 UI 占位（首页入口、加载过渡动画）
- [x] 建立链上服务层接口定义（Mock / 测试网）
- [ ] 设置协作流程（Git 分支、Code Review、Copilot 约定）

#### 阶段 1 执行步骤
1. **环境准备（Day 1）**：安装 Node.js 18、Android SDK/NDK、CocoaPods、Unity 2022 LTS（含 Android/iOS Build Support），制定 Git 分支策略（`main` + `develop` + feature）。
2. **React Native Bare 初始化（Day 1-2）**：`npx react-native init` 后迁移至 `apps/mobile`，配置 TypeScript/ESLint/Prettier，搭建导航骨架。
3. **Unity 占位工程创建（Day 2-3）**：在 `apps/unity` 建立项目，创建 `Scenes/PlaceholderScene.unity` 并实现 `ReactBridge` 打印消息。
4. **双向桥接 PoC（Day 3-4）**：Android 导出 `unityLibrary` 并实现 `UnityPlayerActivity` + RN NativeModule；iOS 集成 `UnityFramework`；RN 端实现 `useUnityBridge` Hook。
5. **UI 占位与接口定义（Day 5）**：首页展示入口与加载占位；`services/web3` 定义账户/余额/NFT 接口（Mock 数据）；撰写 `docs/UNITY_BRIDGE.md`、`docs/API_CONTRACT.md`。
6. **里程碑验收（Week 1 末）**：RN 按钮可调用 Unity 占位逻辑并接收回调；Mock 数据贯通 Home/Profile；整理开发流程文档。
> **当前进展**：Android / iOS 原生骨架、RN UI 占位、链上 mock 服务、Redux 状态管理已完成；Android Unity 桥接已有 Kotlin stub；Unity 导出与真实桥接尚未开始。
> **下一步优先级**：
> 1. Unity 构建占位场景并验证 `ReactBridge` 消息收发；
> 2. 导出 Android `unityLibrary` 并实现 `UnityBridgeModule`；
> 3. 集成 iOS `UnityFramework`，实现 `UnityBridge` 与 `UnityViewManager`；
> 4. RN 侧补充 `useUnityBridge` 的超时与错误处理逻辑。

### 阶段 2 待办
- [ ] 完成 React Navigation 架构与核心路由（Home / Trials / Profile / On-chain Data）
- [ ] Home 模块展示项目概览、活动入口与关键数据
- [ ] Trials 模块实现 Unity 场景加载、玩法循环与成绩回传
- [ ] Profile 模块完善钱包绑定、设置入口等交互（已展示 mock 数据）
- [ ] 接入实际链上 SDK，实现余额与道具列表查询
- [x] 建立状态管理方案（Redux Toolkit Store 已接入，待替换真实数据源）
- [ ] 编写首批单元测试与端到端脚本
> **阶段 2 进展摘要**：已优化 Home / Profile / On-chain 页面布局与加载、错误展示；新增团队、仓库、邀请等子页。仍需补充 Unity 交互、链上真实接口与测试脚本。

### 阶段 3 待办
- [ ] 丰富 Explore 模块（地图浏览、NFT 商店、活动入口）
- [ ] 拓展链上数据功能（排行榜、交易记录、事件日志）
- [ ] 替换 Unity 正式美术资源并执行性能 Profiling
- [ ] 优化消息通信与资源加载（Addressables、异步加载）
- [ ] 增强多语言与易用性（色弱模式、动效开关）
- [ ] 建立 A/B 测试与运营数据上报方案

### 阶段 4 待办
- [ ] 完成功能回归测试与性能压测
- [ ] 整合移动端 CI/CD（GitHub Actions + Fastlane/Gradle）
- [ ] 准备上架文档、截图与视频素材
- [ ] 完成安全审计（链上、原生权限、数据隐私）
- [ ] 撰写用户手册与 FAQ
- [ ] 制定后续迭代路线图与运维预案

## 文档与协作
- 维护 `ARCHITECTURE.md`、`UNITY_BRIDGE.md`、`API_CONTRACT.md`，确保技术方案实时更新。
- 每周更新《开发计划》，勾选完成项并注明调整原因。
- 协作规范参考 `docs/协作流程.md`（Git 分支、Code Review、Copilot 使用等）。
- 使用 GitHub Projects / Issue 看板同步任务状态，关键决策记录于 PR / Issue。
- 与美术、链上团队维护资源交付时间表，规划占位资源替换节奏。

## 风险与应对
- **Unity ↔ RN 集成复杂**：提前完成 PoC，沉淀脚手架与最佳实践。
- **链上接口不稳定**：设计离线缓存与重试机制，支持 Mock 数据回退。
- **性能压力**：阶段 2 起引入 Profiling，设定移动端 FPS / 内存基线。
- **资源交付延迟**：使用占位资源策略，确保功能开发不中断。
