# 开发计划

## 阶段划分与目标

| 阶段 | 目标 | 关键产出 | 预计时长 |
| --- | --- | --- | --- |
| 阶段 1：技术验证与框架搭建 | 完成 React Native Bare 与 Unity 的基础集成验证，搭建项目骨架与协作流程 | RN Bare 初始工程、Unity 占位场景、消息桥接 PoC、基础文档 | 2 周 |
| 阶段 2：核心功能 MVP | 落地首页、试炼、我的模块基础功能，串联链上数据展示流程 | RN 导航与 UI、Unity 试炼场景交互、链上余额/道具查询、端到端 Demo | 4 周 |
| 阶段 3：功能拓展与优化 | 丰富探索与链上数据模块，替换正式美术资源并优化性能 | 探索内容、排行榜/NFT 功能、正式 3D 资源、性能报告 | 4-6 周 |
| 阶段 4：测试与发布准备 | 完成全面测试与发布所需材料 | 测试用例与报告、CI/CD 流水线、上架物料与用户文档 | 2 周 |

## 任务清单

### 阶段 1 待办
- [x] 初始化 React Native Bare 项目骨架（Android/iOS）
- [ ] 集成 Unity 占位场景，生成 Android AAR 与 iOS Framework
- [ ] 搭建 React Native ↔ Unity 消息桥（示例：启动场景、回传状态）
- [x] 构建初步 UI 占位（首页入口、加载过渡动画）
- [x] 建立链上服务层接口定义（Mock / 测试网）
- [ ] 设置协作流程（Git 分支策略、Copilot 约定、代码规范）

#### 阶段 1 执行步骤
1. **环境准备（Day 1）**  
   安装 Node.js ≥ 18、Yarn（可选）、Android SDK/NDK、CocoaPods（macOS），并安装 Unity 2022 LTS（含 Android/iOS Build Support）；制定 Git 分支策略（`main` + `develop` + feature）。
2. **React Native Bare 初始化（Day 1-2）**  
   在 `apps/mobile` 执行 `npx react-native init RNGameShell --skip-install --npm`，迁移到既定目录并配置 TypeScript/ESLint/Prettier，调整入口至 `src/app/App.tsx` 搭建导航骨架。
3. **Unity 占位工程创建（Day 2-3）**  
   在 `apps/unity` 通过 Unity Hub 建项目，创建 `Scenes/PlaceholderScene.unity` 并编写 `Scripts/ReactBridge.cs` 打印消息。
4. **双向桥接 PoC（Day 3-4）**  
   Android 导出 `unityLibrary`、实现 `UnityPlayerActivity` 与 RN NativeModule；iOS 集成 `UnityFramework`；RN 端实现 `useUnityBridge` Hook。
5. **UI 占位与接口定义（Day 5）**  
   首页展示“进入试炼”按钮与加载占位；`services/web3` 定义账户/余额/NFT 接口（暂返回 mock 数据）；撰写 `docs/UNITY_BRIDGE.md`、`docs/API_CONTRACT.md`。
6. **里程碑验收（Week 1 末）**  
   RN 按钮可调用 Unity 占位逻辑并接收回调；Mock 数据在 `Home`/`Profile` 展示；整理开发流程文档。

> **当前进展**：Android / iOS 原生骨架、RN UI 占位、链上 mock 服务、Redux 状态管理已完成；Android Unity 桥接/视图管理已有 Kotlin stub；Unity 导出与真实桥接尚未开始。

> **下一步优先级**：  
> 1. 在 Unity 中搭建占位场景并验证 `ReactBridge` 消息收发；  
> 2. 导出 Android `unityLibrary` 并实现 `UnityBridgeModule`；  
> 3. 集成 iOS `UnityFramework`，实现 `UnityBridge` 与 `UnityViewManager`；  
> 4. 在 RN 侧补充 `useUnityBridge` 的超时与错误处理逻辑。

### 阶段 2 待办
- [ ] 完成 React Navigation 架构与核心路由（Home / Trials / Profile / On-chain Data）
- [ ] Home 模块展示项目概览、活动入口与关键数据
- [ ] Trials 模块实现 Unity 场景加载、玩法循环与成绩回传
- [ ] Profile 模块完善钱包绑定、设置入口等交互（已展示账户摘要及 mock 数据）
- [ ] 接入实际链上 SDK（测试网），实现余额与道具列表查询
- [x] 建立状态管理方案（Redux Toolkit Store 已接入，待替换真实数据源）
- [ ] 编写首批单元测试与端到端脚本

> **阶段 2 进展摘要**：  
> - 已优化 Home / Profile / On-chain 页面布局与加载、错误展示；新增团队、仓库、邀请等子页的 mock 数据卡片。  
> - 仍需补充 Unity 交互（Trials）、链上真实接口与测试脚本。

### 阶段 3 待办
- [ ] 丰富 Explore 模块（地图浏览、NFT 商店、活动入口）
- [ ] 拓展链上数据功能（排行榜、交易记录、事件日志）
- [ ] 替换 Unity 正式美术资源并执行性能 Profiling
- [ ] 优化消息通信与资源加载（Addressables、异步加载）
- [ ] 增强多语言与易用性（色弱模式、动效开关）
- [ ] 建立 A/B 测试与运营数据上报方案

### 阶段 4 待办
- [ ] 完成功能回归测试与性能压测
- [ ] 整合移动端 CI/CD（GitHub Actions + Fastlane/Gradle）
- [ ] 准备上架文档、截图与视频素材
- [ ] 完成安全审计（链上、原生权限、数据隐私）
- [ ] 撰写用户手册与 FAQ
- [ ] 制定后续迭代路线图与运维预案

## 文档与协作
- 维护 `ARCHITECTURE.md`、`UNITY_BRIDGE.md`、`API_CONTRACT.md`，确保技术方案实时更新。
- 每周更新《开发计划》，勾选完成项并注明调整原因。
- 协作规范见 `docs/协作流程.md`（Git 分支、Code Review、Copilot 使用等）。
- 使用 GitHub Projects / Issue 看板同步任务状态，关键决策记录在 PR / Issue。
- 与美术、链上团队维护资源交付时间表，规划占位资源替换节奏。

## 风险与应对
- **Unity 与 RN 集成复杂**：提前完成 PoC，沉淀脚手架与最佳实践。
- **链上接口不稳定**：设计离线缓存与重试机制，支持 Mock 数据回退。
- **性能压力**：阶段 2 起引入 Profiling，设定移动端 FPS / 内存基线。
- **资源交付延迟**：使用占位资源策略，确保功能开发不中断。
