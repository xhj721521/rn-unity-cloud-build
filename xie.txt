ä¸‹é¢è¿™ä»½ä¸€æ¬¡æ€§å¯æ‰§è¡Œçš„ä»»åŠ¡å•ä½ ç›´æ¥è´´åˆ°ä»“åº“çš„ã€ŒIssues / Copilot chatã€é‡Œå°±è¡Œã€‚åŒ…æ‹¬ï¼šæ–‡ä»¶ç»“æ„ã€å®Œæ•´ä»£ç éª¨æ¶ã€è·¯ç”±æ¥çº¿ã€Unity ç›²ç›’æ¶ˆæ¯æ¡¥ã€è‰²æ¿/å°ºå¯¸å¸¸é‡ã€éªŒæ”¶æ ‡å‡†ã€æäº¤åˆ‡åˆ†ã€‚ä¸æ”¹ä¾èµ–ï¼Œè·‘ä¸èµ·æ¥ä¹Ÿæœ‰å…œåº•å ä½ï¼ˆUnityView stubã€å ä½å›¾æ ‡ï¼‰ã€‚

ğŸ§© Task: Home æ–œæ¡† UI + Unity ç›²ç›’é›†æˆï¼ˆRN Bare + UNï¼‰
ğŸ¯ ç›®æ ‡

é¦–é¡µæ‰€æœ‰å¡ç‰‡é‡‡ç”¨ç»Ÿä¸€å·¦å³å¯¹é½çº¿ä¸å€¾æ–œæ¡†ï¼ˆskewï¼‰ï¼š

é¡¶éƒ¨èµ„äº§å¡ï¼šå¤§æ–œæ¡†ï¼Œé•¿åº¦ä¸ç›²ç›’å¡ä¸€è‡´ï¼Œé«˜åº¦å°äºç›²ç›’ã€‚

ä¸­éƒ¨å››å¡ 2Ã—2ï¼šå°æ–œæ¡†ï¼Œé•¿åº¦ä¸èµ„äº§/ç›²ç›’ä¸€è‡´ï¼Œé«˜åº¦æœ€å°ã€‚

åº•éƒ¨ç›²ç›’å¡ï¼šæœ€å¤§æ–œæ¡†ï¼Œä¸èµ„äº§/å››å¡åŒå®½ã€‚

ç›²ç›’ç”± Unity æä¾›ï¼šç‚¹å‡»ç›²ç›’å¡â†’è¿›å…¥å…¨å± Unity åœºæ™¯æ’­æ”¾å¼€ç›’åŠ¨ç”»â†’Unity å›ä¼ ç»“æœâ†’RN æ›´æ–°ä½™é¢/èƒŒåŒ…å¹¶å¼¹çª—ã€‚

åº•éƒ¨å¯¼èˆªï¼šåŠç»ç’ƒèƒ¶å›Šæ ·å¼ï¼Œ5 ä¸ª tabï¼ˆé¦–é¡µ/è¯•ç‚¼/æ¢ç´¢/é“¾é‰´/æˆ‘çš„ï¼‰ã€‚

è¯´æ˜ï¼šæ–œæ¡†åªå½±å“è¾¹æ¡†ä¸èƒŒæ™¯ï¼›å†…å®¹ä¿æŒæ­£ï¼ˆå­å®¹å™¨åšåå‘ skewï¼‰ã€‚Unity ç”»é¢ä¿æŒçŸ©å½¢ï¼Œéœ€è¦æ–œè¾¹è§‚æ„Ÿç”¨è¦†ç›– PNG æˆ–åç»­åŸç”Ÿè£å‰ªã€‚

ğŸ”§ çº¦æŸ

ä¸è¦å‡çº§/æ–°å¢ä¾èµ–ï¼ˆä¸æ”¹ package.jsonï¼‰ã€‚

è‹¥å·¥ç¨‹é‡Œå·²æœ‰ react-native-linear-gradient / svg / skia å¯åç»­æ›¿æ¢å®ç°ï¼Œæœ¬æ¬¡ä½¿ç”¨çº¯ RN + PNG glow ä¿è¯ç¨³å®šã€‚

TypeScript/JS ä»»ä¸€å¯ç”¨ï¼›è‹¥é¡¹ç›®æ˜¯ JSï¼ŒæŠŠ .ts/.tsx åç¼€æ¢æˆ .js/.jsx å³å¯ã€‚

ğŸ“ æ–°å¢æ–‡ä»¶ç»“æ„
src/
  theme/
    colors.ts
    metrics.ts
  unity/
    UnityBridge.ts
  components/
    TiltFrame.tsx
    NeonButton.tsx
    BottomNav.tsx
  screens/
    HomeScreen.tsx
    BlindBoxScreen.tsx
assets/
  glow_btn.png
  glow_card.png
  overlay_scanline.png
  icons/
    home.png  trial.png  explore.png  chain.png  me.png
    trophy.png  forge.png  market.png  gift.png  cube.png


assets/* ç”¨å ä½å›¾å…ˆæ”¾ï¼ˆä»»æ„ 2x PNGï¼‰ï¼Œåç»­æ›¿æ¢ç¾æœ¯å³å¯ï¼›æ²¡æœ‰å°±å»º 1Ã—1 é€æ˜å›¾ä¹Ÿèƒ½è·‘ã€‚

ğŸ¨ ä¸»é¢˜å¸¸é‡

src/theme/colors.ts

export const palette = {
  bg0:'#0B0B14', bg1:'#120022', bg2:'#19002D',
  magenta:'#FF3DF7', violet:'#8F00FF', cyan:'#00E8FF',
  text:'#EDE8FF', sub:'#9BA3C6', success:'#29FF9D', danger:'#FF5577',
};


src/theme/metrics.ts

import {Dimensions} from 'react-native';
const W = Dimensions.get('window').width;
export const SIDE = 12;             // é¡µé¢å·¦å³å†…è¾¹è·
export const GUTTER = 10;           // å¡ç‰‡é—´è·
export const CARD_WIDTH = W - SIDE*2;

export const H_ASSET = 112;         // èµ„äº§å¡é«˜åº¦ï¼ˆä¸­ï¼‰
export const H_SMALL = 88;          // å››å¡é«˜åº¦ï¼ˆå°ï¼‰
export const H_BOX   = 150;         // ç›²ç›’å¡é«˜åº¦ï¼ˆå¤§ï¼‰

export const TILT_ASSET = -12;      // å¤§æ–œ
export const TILT_SMALL = -10;      // å°æ–œ
export const TILT_BOX   = -14;      // æœ€å¤§æ–œ

export const RADIUS = 20;
export const NAV_H = 72;
export const PRESS_SCALE = 0.98;    // æŒ‰å‹åé¦ˆ

ğŸ§± å…¬å…±ç»„ä»¶

src/components/TiltFrame.tsx

import React from 'react';
import {View, Image, StyleSheet, ViewStyle} from 'react-native';
import {RADIUS} from '../theme/metrics';

type Props = {
  style?: ViewStyle;
  tiltDeg: number;                   // -10 ~ -14
  borderColor: string;               // æè¾¹è‰²ï¼ˆå•è‰²ï¼Œé…åˆ glow PNGï¼‰
  glass?: [string, string];          // [ä¸Šæµ…, ä¸‹æ·±] ç»ç’ƒåº•
  children?: React.ReactNode;
};

export default function TiltFrame({
  style,
  tiltDeg,
  borderColor,
  glass=['rgba(255,255,255,0.08)','rgba(255,255,255,0.02)'],
  children,
}: Props) {
  return (
    <View style={[style, {overflow:'visible'}]}>
      {/* èƒŒåå‘å…‰ */}
      <Image source={require('../../assets/glow_card.png')}
             style={StyleSheet.absoluteFill} resizeMode="stretch" />
      {/* æ–œæ¡† */}
      <View style={[
        styles.skew, {transform:[{skewX:`${tiltDeg}deg`}], borderColor}
      ]}>
        {/* ç»ç’ƒåº•ï¼ˆä¸Šæµ…ä¸‹æ·±ï¼‰ */}
        <View style={[StyleSheet.absoluteFill, {backgroundColor:glass[1]}]} />
        <View style={[StyleSheet.absoluteFill, {opacity:0.5, backgroundColor:glass[0]}]} />
        {/* å†…å®¹åæ–œçŸ«æ­£ */}
        <View style={{transform:[{skewX:`${-tiltDeg}deg`}], padding:14}}>
          {children}
        </View>
      </View>
    </View>
  );
}
const styles = StyleSheet.create({
  skew:{
    borderWidth:1,
    borderRadius:RADIUS,
    backgroundColor:'rgba(10,10,20,0.6)',
  },
});


src/components/NeonButton.tsx

import React from 'react';
import {Pressable, Text, View, Image} from 'react-native';
import {palette} from '../theme/colors';
import {RADIUS, PRESS_SCALE} from '../theme/metrics';

export default function NeonButton({title,onPress}:{title:string;onPress:()=>void;}){
  return (
    <Pressable onPress={onPress} style={{alignSelf:'center'}}>
      {({pressed})=>(
        <View style={{
          transform:[{scale: pressed? PRESS_SCALE:1}],
          height:48, minWidth:168, paddingHorizontal:18,
          borderRadius:RADIUS, borderWidth:1, borderColor:palette.magenta,
          justifyContent:'center', alignItems:'center', overflow:'visible',
          backgroundColor:'rgba(255,255,255,0.06)'
        }}>
          <Image source={require('../../assets/glow_btn.png')}
                 style={{position:'absolute', left:-20,right:-20, top:-18,bottom:-18, opacity: pressed?0.6:0.9}} />
          <Text style={{color:palette.text, fontWeight:'700'}}>{title}</Text>
        </View>
      )}
    </Pressable>
  );
}


src/components/BottomNav.tsx

import React from 'react';
import {View, Image, Text, Pressable} from 'react-native';
import {palette} from '../theme/colors';
import {NAV_H, SIDE, RADIUS} from '../theme/metrics';

const items = [
  {key:'home',   label:'é¦–é¡µ', icon:require('../../assets/icons/home.png')},
  {key:'trial',  label:'è¯•ç‚¼', icon:require('../../assets/icons/trial.png')},
  {key:'explore',label:'æ¢ç´¢', icon:require('../../assets/icons/explore.png')},
  {key:'chain',  label:'é“¾é‰´', icon:require('../../assets/icons/chain.png')},
  {key:'me',     label:'æˆ‘çš„', icon:require('../../assets/icons/me.png')},
];

export default function BottomNav({active='home', onChange}:{active?:string; onChange:(k:string)=>void;}){
  return (
    <View style={{
      height:NAV_H, marginHorizontal:SIDE, marginBottom:SIDE,
      backgroundColor:'rgba(15,15,24,0.6)', borderRadius:RADIUS*1.2,
      borderWidth:1, borderColor:'rgba(255,255,255,0.12)',
      flexDirection:'row', alignItems:'center', justifyContent:'space-around'
    }}>
      {items.map(it=>{
        const focused = it.key===active;
        return (
          <Pressable key={it.key} onPress={()=>onChange(it.key)} style={{alignItems:'center'}}>
            <Image source={it.icon} style={{width:22,height:22, tintColor: focused? palette.cyan:'#8BA0C6'}} />
            <Text style={{fontSize:12, color: focused? palette.text:'#9BA3C6', marginTop:6}}>{it.label}</Text>
            {focused && <View style={{
              position:'absolute', top:6, width:36, height:18, borderRadius:9,
              borderWidth:1, borderColor:palette.cyan, opacity:0.35
            }}/>}
          </Pressable>
        );
      })}
    </View>
  );
}

ğŸ”— Unity ç›²ç›’æ¶ˆæ¯æ¡¥

src/unity/UnityBridge.ts

type Payload = Record<string, any>;

export const UnityBridge = {
  send(fn: string, payload: Payload) {
    // TODO: ä½¿ç”¨ç°æœ‰ RNâ†”ï¸Unity æ’ä»¶å‘é€æ¶ˆæ¯
    // ä¾‹å­ï¼ˆæŒ‰ä½ ä»¬é¡¹ç›®æ”¹åï¼‰ï¼š
    // UnityModule.postMessage('BlindBoxController', fn, JSON.stringify(payload));
  },

  // åœ¨ App å…¥å£æ³¨å†Œï¼Œè½¬å‘åˆ°å„é¡µé¢
  onMessage(evt: {name: string; data: string}) {
    try {
      const data = JSON.parse(evt.data || '{}');
      // ç»Ÿä¸€åˆ†å‘ï¼Œé¡¹ç›®ä¸­ç”¨äº‹ä»¶æ€»çº¿/çŠ¶æ€ç®¡ç†æ›¿æ¢
      // Emitter.emit(evt.name, data);
    } catch {}
  },
};


å…¨å±æ‰¿è½½é¡µ src/screens/BlindBoxScreen.tsx

import React, {useEffect} from 'react';
import {View} from 'react-native';
import {UnityBridge} from '../unity/UnityBridge';

const UnityView = (global as any).UnityView || (()=> <View />); // stub

export default function BlindBoxScreen(){
  useEffect(()=>{ UnityBridge.send('INIT_BOX_SCENE', {}); },[]);
  return <UnityView style={{flex:1, backgroundColor:'#000'}} />;
}

ğŸ“± é¦–é¡µ

src/screens/HomeScreen.tsx

import React from 'react';
import {View, Text, Image, ScrollView} from 'react-native';
import {palette} from '../theme/colors';
import {SIDE, GUTTER, CARD_WIDTH, H_ASSET, H_SMALL, H_BOX, TILT_ASSET, TILT_SMALL, TILT_BOX, RADIUS} from '../theme/metrics';
import TiltFrame from '../components/TiltFrame';
import NeonButton from '../components/NeonButton';
import BottomNav from '../components/BottomNav';
import {UnityBridge} from '../unity/UnityBridge';

export default function HomeScreen({navigation}: any){
  const half = (CARD_WIDTH - GUTTER) / 2;

  return (
    <View style={{flex:1, backgroundColor: palette.bg0}}>
      {/* èƒŒæ™¯è¦†ç›–ï¼ˆæ‰«æçº¿/å™ªç‚¹ï¼‰ */}
      <Image source={require('../../assets/overlay_scanline.png')}
             style={{position:'absolute',left:0,right:0,top:0,bottom:0,opacity:0.06}} />

      <ScrollView contentContainerStyle={{paddingTop:12, paddingBottom:90}}>

        {/* èµ„äº§å¡ï¼ˆåŒå®½ï¼Œç•¥å°é«˜åº¦ï¼‰ */}
        <View style={{paddingHorizontal:SIDE}}>
          <TiltFrame tiltDeg={TILT_ASSET} borderColor={palette.cyan}
            style={{width:CARD_WIDTH, height:H_ASSET, borderRadius:RADIUS}}>
            <View style={{flexDirection:'row', alignItems:'center', justifyContent:'space-between'}}>
              <View style={{flexDirection:'row', alignItems:'center'}}>
                <View style={{width:40,height:40,borderRadius:20,borderWidth:1,borderColor:palette.cyan, alignItems:'center',justifyContent:'center'}}>
                  <Text style={{color:palette.text}}>P</Text>
                </View>
                <View style={{marginLeft:10}}>
                  <Text style={{color:palette.text, fontSize:18, fontWeight:'700'}}>Pilot Zero</Text>
                  <Text style={{color:palette.sub, fontSize:12}}>é›¾è™¹é“¾åŸŸå·²åŒæ­¥</Text>
                </View>
              </View>
              <View>
                <Text style={{color:palette.text, fontWeight:'700'}}>2,450 Arc</Text>
                <Text style={{color:palette.sub, textAlign:'right'}}>çŸ¿çŸ³ 780 é¢—</Text>
              </View>
            </View>
          </TiltFrame>
        </View>

        {/* å››å¡ 2Ã—2ï¼ˆå°æ–œæ¡†ï¼ŒåŒå®½ï¼‰ */}
        <View style={{paddingHorizontal:SIDE, marginTop:12}}>
          <RowCard width={half} title="æ’è¡Œæ¦œ" sub="èµ›å­£ä¸å…¨æœæ’å" icon="trophy" color={palette.magenta} />
          <RowCard width={half} title="é”»é€ åŠ" sub="å¼ºåŒ–è£…å¤‡/åˆæˆæ¨¡å—" icon="forge" color={palette.cyan} />
          <RowCard width={half} title="é›†å¸‚åŠ" sub="æŒ‚å•NFTä¸ç¨€æœ‰ä¼™ä¼´" icon="market" color={palette.magenta} />
          <RowCard width={half} title="æ´»åŠ¨å•†åŸ" sub="å…‘æ¢èµ›å­£é™å®šå¥–åŠ±" icon="gift" color={palette.violet} />
        </View>

        {/* ç›²ç›’å¡ï¼ˆæœ€å¤§æ–œæ¡†ï¼ŒåŒå®½ï¼‰ */}
        <View style={{paddingHorizontal:SIDE, marginTop:12}}>
          <TiltFrame tiltDeg={TILT_BOX} borderColor={palette.magenta}
            style={{width:CARD_WIDTH, height:H_BOX, borderRadius:RADIUS}}>
            <View style={{flex:1, alignItems:'center', justifyContent:'center'}}>
              <Image source={require('../../assets/icons/cube.png')} style={{width:56,height:56, tintColor:palette.cyan}} />
              <Text style={{color:palette.sub, marginTop:8}}>ä»Šæ—¥å‰©ä½™ 2 æ¬¡æœºä¼š</Text>
              <View style={{height:10}}/>
              <NeonButton title="æ‰“å¼€ç›²ç›’ï¼ˆ100 Arcï¼‰" onPress={()=>{
                UnityBridge.send('OPEN_BLIND_BOX', { cost:100 });
                navigation?.navigate?.('BlindBox'); // è·¯ç”±åœ¨å®¿ä¸»Appæ³¨å†Œ
              }}/>
            </View>
          </TiltFrame>
        </View>

      </ScrollView>

      <BottomNav active="home" onChange={()=>{}} />
    </View>
  );
}

function RowCard({width, title, sub, icon, color}:{width:number; title:string; sub:string; icon:string; color:string;}){
  return (
    <View style={{flexDirection:'row', justifyContent:'space-between', marginBottom:GUTTER}}>
      <TiltFrame tiltDeg={-10} borderColor={color} style={{width, height:H_SMALL}}>
        <View style={{flexDirection:'row', alignItems:'center'}}>
          <Image source={
            icon==='trophy'? require('../../assets/icons/trophy.png'):
            icon==='forge'? require('../../assets/icons/forge.png'):
            icon==='market'? require('../../assets/icons/market.png'):
            require('../../assets/icons/gift.png')
          } style={{width:28,height:28, tintColor:'#BDE1FF'}}/>
          <View style={{marginLeft:10}}>
            <Text style={{color:'#EDE8FF', fontWeight:'700'}}>{title}</Text>
            <Text numberOfLines={1} style={{color:'#9BA3C6', fontSize:12, marginTop:4}}>{sub}</Text>
          </View>
        </View>
      </TiltFrame>

      {/* å ä½ä»¥ç»´æŒä¸¤åˆ—å¸ƒå±€ï¼ˆç”±çˆ¶ç»„ä»¶ä¸¤è¡Œåˆ†åˆ«æ¸²æŸ“æ—¶å¯åˆ ï¼‰ */}
      <View style={{width: GUTTER}} />
    </View>
  );
}


è·¯ç”±ä¾§ï¼šæŠŠ HomeScreen æŒ‚åˆ° Homeï¼ŒBlindBoxScreen æŒ‚åˆ° BlindBoxã€‚æ²¡æœ‰å¯¼èˆªåº“å°±ç”¨ç°æœ‰å¯¼èˆªæ–¹æ³•ï¼›æ²¡æœ‰å°±æš‚æ—¶ä¸è·³è½¬ä¹Ÿèƒ½ç¼–è¯‘ã€‚

âœ… éªŒæ”¶æ ‡å‡†

å¯¹é½ä¸å°ºå¯¸

èµ„äº§å¡ã€å››å¡ã€ç›²ç›’å¡ å·¦å³å¯¹é½çº¿ä¸€è‡´ï¼ˆCARD_WIDTH æ§åˆ¶ï¼‰ã€‚

å€¾æ–œè§’ï¼šèµ„äº§ -12Â°ã€å››å¡ -10Â°ã€ç›²ç›’ -14Â°ã€‚

é«˜åº¦å±‚çº§ï¼šH_BOX > H_ASSET > H_SMALLï¼ˆ150 / 112 / 88ï¼Œæˆ–ç­‰æ¯”ï¼‰ã€‚

äº¤äº’

å¡/æŒ‰é’®æŒ‰å‹æ—¶æ•´ä½“ scale 0.98ï¼ŒæŒ‰é’® glow ç”± 0.9â†’0.6ã€‚

åº•éƒ¨å¯¼èˆªé€‰ä¸­é¡¹æœ‰ç»†æè¾¹å…‰åœˆã€å›¾æ ‡/æ–‡å­—é«˜äº®ã€‚

Unity é›†æˆ

ç‚¹å‡»ç›²ç›’æŒ‰é’®â†’è¿›å…¥ Unity å…¨å±ï¼›Unity åŠ¨ç”»ç»“æŸåå‘é€ BOX_RESULT {ok, itemId, rarity, newArcBalance} â†’ RN æ”¶åˆ°åæ›´æ–°ä½™é¢å¹¶ç»™å‡ºç»“æœå¼¹çª—ï¼ˆå¯å…ˆç”¨ alert(JSON.stringify(res)) å ä½ï¼‰ã€‚

Unity é”™è¯¯æˆ– 10s è¶…æ—¶â†’RN toast å¹¶å…è®¸é‡è¯•ã€‚

å…¼å®¹

iOS/Android å‡å¯ç¼–è¯‘è¿è¡Œï¼›åœ¨æ—  Unity æ’ä»¶ç¯å¢ƒä¸‹ï¼ŒBlindBoxScreen ç”¨é»‘å± stubï¼Œä¸æŠ¥é”™ã€‚

ğŸ§ª æœ¬åœ°éªŒè¯æ­¥éª¤

å°†ä»¥ä¸Šæ–‡ä»¶/ä»£ç è½åˆ°å¯¹åº”è·¯å¾„ï¼›å‡†å¤‡ assets/* å ä½ PNGã€‚

è¿è¡Œ Appï¼Œæ‰“å¼€é¦–é¡µï¼Œæ£€æŸ¥ä¸‰ç±»å¡ç‰‡åŒå®½ã€å…¨éƒ¨æ–œã€‚

ç‚¹ã€Œæ‰“å¼€ç›²ç›’ã€ï¼šè‹¥é¡¹ç›®å·²æ¥ Unity â†’ è¿›å…¥å…¨å±å¹¶æœ‰æ¶ˆæ¯å›ä¼ ï¼›æœªæ¥ â†’ æ­£å¸¸è·³è½¬åˆ°é»‘å± stubï¼Œæ— å´©æºƒã€‚

åˆ‡æ¢ä¸åŒæœºå‹ï¼Œç¡®è®¤å‘å…‰ PNG ä¸å¤±çœŸã€æ»šåŠ¨æµç•…ã€‚

ğŸ“¦ æäº¤åˆ‡åˆ†ï¼ˆå»ºè®® 4 ä¸ª commitï¼‰

feat(theme): add colors & metricsï¼ˆæ–°å¢ä¸»é¢˜å¸¸é‡ä¸å ä½èµ„æºï¼‰

feat(components): TiltFrame/NeonButton/BottomNavï¼ˆä¸‰ç»„ä»¶è½åœ°ï¼‰

feat(screens): HomeScreen slanted layoutï¼ˆé¦–é¡µæ–œæ¡†å¸ƒå±€ä¸å¯¼èˆªæ ï¼‰

feat(unity): BlindBoxScreen + UnityBridge stubsï¼ˆUnity å…¨å±æ‰¿è½½ä¸æ¶ˆæ¯æ¡¥å ä½ï¼‰

ğŸ”œ åç»­å¯é€‰å¢å¼ºï¼ˆéæœ¬æ¬¡å¿…é¡»ï¼‰

SVG æ¸å˜æè¾¹/å‘å…‰ï¼ˆreact-native-svgï¼‰æ›¿æ¢å•è‰² + glow PNGã€‚

ç›²ç›’å¡å†…åµŒ Unity è¿·ä½ é¢„è§ˆï¼ˆè€æœºå‹å¯é€šè¿‡å¼€å…³å…³é—­ï¼‰ã€‚

åŸç”Ÿå¤šè¾¹å½¢è£å‰ª/Skia clipï¼Œè®© Unity è¿·ä½ é¢„è§ˆè¢«çœŸæ–œè¾¹è£åˆ‡ã€‚

ä¸»é¢˜åˆ‡æ¢ï¼ˆç´«ç²‰ä¸»/è“é’ä¸»ï¼‰ã€‚