一、模块总览（给 Copilot）

模块名：命运集市（Market）

需要实现 5 个页面 / Screen：

MarketHomeScreen
集市首页（你现在截图里的那个页面），包含矿石市场、碎片市场、NFT 拍卖区等概览。

MarketListingsScreen
某一种资源的「全部挂单列表」页（比如命运矿石全部挂单、命运碎片全部挂单）。

MarketHistoryScreen
某一种资源的「成交记录」页。

MarketNewOrderScreen
发布买单/卖单（发布求购 / 我要上架）的表单页。

MarketNewAuctionScreen
NFT「发起拍卖」表单页。

当前阶段重点：① 首页 + ② 全部挂单 + ③ 成交记录。
新挂单 / 新拍卖可以先做简单表单，占位即可。

二、路由与文件结构（任务）

在集市所在的 Tab（比如 HomeTab）里，新建一个 Stack：

MarketStack:
  - MarketHomeScreen        // 集市首页
  - MarketListingsScreen    // 全部挂单
  - MarketHistoryScreen     // 成交记录
  - MarketNewOrderScreen    // 发布挂单
  - MarketNewAuctionScreen  // 发起拍卖


底部导航里「集市」Tab 点击时，默认进入 MarketHomeScreen。

所有从其它页面（例如资产中心、矿石卡片上的“去交易”）进入集市挂单页时，都通过：

navigation.navigate('MarketStack', {
  screen: 'MarketListings',
  params: { type: 'ore', side: 'sell' }
})


type: 'ore' | 'shard' | 'nft'

side: 'sell' | 'buy' | 'all'

三、集市首页：MarketHomeScreen
1. 页面整体结构

外层：SafeAreaView + ScrollView

内容从上到下：

标题 + 副标题

一级分类 Tab（全部 / 矿石 / 碎片 / NFT）

二级操作区（价格 / 数量 / 最新 / 流动性 + 发布求购/发起拍卖）

核心指标 3 小卡片

（全部 Tab）NFT 焦点区

矿石市场卡片

碎片市场卡片

（NFT Tab）NFT 拍卖网格

2. 顶部标题

标题：集市

文案：链上实时价格脉冲 · 交易命运矿石 / 命运碎片 / 命运 NFT

3. 一级分类 Tab（资源类型）

一行 4 个 pill，支持切换状态：

全部

矿石

碎片

NFT

行为：

切到 全部：显示所有概览模块（矿石市场 + 碎片市场 + NFT 焦点 + 拍卖区简略）。

切到 矿石：只显示矿石相关模块（核心指标 + 矿石市场卡片）。

切到 碎片：只显示碎片相关模块。

切到 NFT：主要显示 NFT 焦点和 NFT 拍卖网格。

4. 二级操作区（排序与操作按钮）

位于一级 Tab 下方，一行布局：

左侧：四个排序 pill

价格（按价格排序）

数量

最新

流动性

右侧：主操作按钮

当 Tab 为 全部 / 矿石 / 碎片：按钮文案 发布求购

当 Tab 为 NFT：按钮文案 发起拍卖

行为：

点任意排序 pill：更新当前资源列表的 sort 字段（首页展示仅影响下方矿石/碎片市场里显示的两条数据）。

点击 发布求购 →

如果当前 Tab 为 全部：弹出资源选择（矿石/碎片）；选择后跳到 MarketNewOrderScreen。

如果是 矿石/碎片：直接跳 MarketNewOrderScreen，默认 type 为当前资源。

点击 发起拍卖 → 跳到 MarketNewAuctionScreen。

5. 核心指标 3 小卡片

三列紧挨着的卡片，通用样式：

卡 1：

标题：今日新增挂单（NFT Tab 改为 今日新增拍卖）

数值：+18

副文案：相较昨日 +4.8%

卡 2：

标题：均价涨跌

数值：+2.1%

副文案：命运市场平均价格变动

卡 3：

标题：即时成交（NFT Tab 改为 已成交 NFT）

数值：12 单

副文案：24h 成交笔数 +1.8%

数据规则：

全部 Tab：聚合矿石 + 碎片。

矿石 Tab：只显示矿石相关指标。

碎片 Tab：只显示碎片相关。

NFT Tab：指标换为 NFT 的拍卖数据。

6. 命运 NFT 焦点区（全部 / NFT Tab 显示）

卡片样式接近你现在的 “NFT 焦点”：

标题：命运 NFT 焦点

右上角小文案：热度脉冲

每个焦点卡片内容：

名称：巡航机兵核心

当前价：610 ARC

涨跌：+8.2%

至少 2 张卡片横向排列或纵向两列网格。

点击卡片 → 跳到某个 NftDetailScreen（可以先 TODO）。

7. 矿石市场卡片

标题行：

左侧图标（小镐头）+ 标题：命运矿石市场

副标题：原矿与精炼原料集中交易区，适合 Arc 提炼与基础铸造。

右上：今日新增 12 条求购 + 折线图图标（可以只是占位 SVG 或图片）

表格区：

表头：卖家 | 价格 (ARC) | 数量 | 更新时间

至少展示前 2 条挂单：

例：

Pilot_207 | 12.4 | 120 | 2 分钟前

NanoForge | 11.9 | 300 | 7 分钟前

底部按钮行：

左按钮：浏览全部挂单

行为：navigation.navigate('MarketListings', { type: 'ore', side: 'sell' })

右按钮：查看成交记录

行为：navigation.navigate('MarketHistory', { type: 'ore' })

8. 碎片市场卡片

结构完全与矿石市场一致，只是文案和数据不同：

标题：命运碎片市场

副标题：高阶命运碎片与模块在此集散，可直接用于锻造中级装备。

右上标签：稀有碎片均价 +6.5%

按钮行为：

浏览全部挂单 → type: 'shard'

查看成交记录 → type: 'shard'

9. NFT 拍卖网格（NFT Tab 下方）

标题：命运 NFT 拍卖厅
副标题：限时拍卖 · 一切由出价与命运决定。

结构：

顶部大卡：本周焦点拍品

左：NFT 横图

右：当前竞价 820 ARC + 剩余 00:23:27 + CTA 立即出价

下方 2 列网格卡片（和你截图类似）：

单卡内容：

左上：稀有度标签：史诗 / 传奇 / 稀有

右上：小标签：HOT / NEW / ENDING

中间：名称：巡航机兵核心

下方：当前竞价 610 ARC

底部左：倒计时：00:35:27

底部右按钮：立即出价

点击任意卡片/按钮 → NftDetailScreen（预留）。

四、全部挂单列表：MarketListingsScreen
1. 路由参数

MarketListingsScreen 接收：

type: 'ore' | 'shard' | 'nft'
side: 'sell' | 'buy' | 'all'


用于决定标题和默认筛选。

2. 顶部标题 & 说明

标题根据 type 决定：

命运矿石挂单

命运碎片挂单

命运 NFT 挂单（以后可以拆成卖单+拍卖）

右上按钮：

非 NFT：快速上架 → MarketNewOrderScreen，附带 type。

NFT：发起拍卖 → MarketNewAuctionScreen。

标题下方一行说明条，动态文案示例：

展示所有命运矿石卖单 · 已按价格从低到高排序

文案由当前筛选和排序组合生成。

3. 筛选与排序区域

一行简洁操作 + 一个按钮打开高级筛选。

左侧 SegmentedControl：交易方向

全部（side='all'）

卖单

求购

中间：排序状态按钮

文案示例：排序：价格从低到高

点击弹出 ActionSheet：

价格从低到高

价格从高到低

数量从高到低

最新挂单

流动性优先

右侧：筛选 按钮

点击后弹出 Modal / BottomSheet，包含：

两列输入：

最低价格

最高价格

一列输入：

最低数量

复选项：

只看玩家挂单

只看我买得起的

底部两个按钮：

重置

应用筛选

4. 统计条（可选）

如果有数据，显示一条灰色小条：

当前平均价：12.4 ARC · 24h 成交：320 单

没有数据时隐藏。

5. 挂单列表项样式

每条挂单是一张深色圆角卡，左右三列布局：

左列：用户信息

圆形头像（首字母或图标）

昵称：Pilot_207

第二行小字：

卖单：卖家 · 玩家

求购：求购 · 玩家

系统单：卖家 · 系统

中列：挂单信息

行 1：价格：价格 12.4 ARC

行 2：数量：数量 120 单位

行 3（可选）：资源说明：

资源：命运矿石 / 资源：命运碎片

右列：时间 + 操作

行 1：2 分钟前

行 2：主按钮：

如果是卖单：立即购买

如果是求购：出售给 TA

右上角：··· 图标（更多操作，下阶段接：查看详情/复制挂单 ID/举报等）

行为：

点击整卡或主按钮：打开简单确认弹窗，先 TODO，不必接真实支付。

支持下拉刷新、翻页加载。

6. 空状态文案

当列表为空时，显示一块状态卡：

标题：暂时没有符合条件的挂单

副文案（根据模式）：

卖单模式：你可以成为第一个挂单的人。

求购模式：目前还没有人发出求购，试试挂个卖单吧。

CTA：去快速上架 → MarketNewOrderScreen。

五、成交记录列表：MarketHistoryScreen
1. 路由参数
type: 'ore' | 'shard'


NFT 成交可以后面再做。

2. 顶部

标题：

命运矿石成交记录

命运碎片成交记录

副文案：最近 24 小时内的成交明细，用于参考市场真实价格。

可选筛选：

时间维度 pill：24h / 7天 / 30天

排序按钮：按时间倒序（可切换为价格等）

3. 成交记录行样式

每条一行卡片，内容：

左列：

上：买家：Aria_x（可以部分脱敏，如 Ar***）

下：卖家：Pilot_207

中列：

行 1：价格 12.4 ARC

行 2：数量 80 单位

右列：

行 1：总额 992 ARC

行 2：2 分钟前成交

点击行可以打开详情弹窗（可先不做）。

4. 空状态

标题：暂时没有成交记录

文案：市场还在酝酿期，耐心等等其他命运矿工出手。

六、发布挂单：MarketNewOrderScreen（简版）

这个阶段不用做特别复杂，先保证从「发布求购 / 我要上架」能进入此页并提交表单。

1. 路由参数
type: 'ore' | 'shard'
mode: 'buy' | 'sell'   // 发布求购/我要上架 由入口决定

2. 表单字段

资源类型（只读）：命运矿石 / 命运碎片

交易方向（只读）：发布卖单 / 发布求购

单价输入：单价（ARC）

数量输入：数量

合计金额（自动计算，仅展示）

备注（可选）

底部按钮：

主按钮：确认发布

副文案：发布后将进入命运集市，其他玩家可以直接与你成交。

点击确认后：

先模拟成功，Toast：挂单已发布，稍后即可在集市中看到。

返回 MarketListingsScreen。

七、发起拍卖：MarketNewAuctionScreen（简版）

字段：

NFT 选择：下拉或占位按钮 选择要拍卖的命运 NFT

起拍价：起拍价（ARC）

加价幅度：最小加价幅度

拍卖时长：24h / 48h / 72h

按钮：

发起拍卖

文案：拍卖期间，你可以随时查看出价情况，拍卖结束后系统会自动结算。

成功后 Toast 并返回 MarketHomeScreen NFT Tab。