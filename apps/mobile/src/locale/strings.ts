export type TemplateParams = Record<string, string | number>;

const zhCN = {
  'my.cta.invite': '邀请队友',
  'my.cta.export': '导出战报',
  'my.cta.viewAll': '查看全部',
  'my.network.stable': '网络：稳定',
  'my.hero.title': '指挥中心 · {name}',
  'my.hero.subtitle': 'Pilot Zero',
  'my.hero.level': 'Lv.{level}',
  'my.hero.asset.arc': 'ARC',
  'my.hero.asset.ore': '矿石',
  'my.stats.section': '作战指标',
  'my.stats.miners': '矿工',
  'my.stats.miners.active': '在岗 {active} / {total}',
  'my.stats.nft': 'NFT',
  'my.stats.nft.subtitle': '装备完好',
  'my.stats.maps': '地图（已解锁）',
  'my.stats.maps.subtitle': '完成度',
  'my.stats.maps.value': '{unlocked} / {total}',
  'my.stats.shards.rare': '稀有碎片',
  'my.stats.shards.subtitle': 'Rare Shards',
  'my.stats.chain': '链鉴中心',
  'my.stats.chain.subtitle': '链上数据中枢',
  'my.matrix.section': '功能矩阵',
  'my.entry.team.title': '我的团队',
  'my.entry.team.desc': '成员状态与权益',
  'my.entry.storage.title': '我的仓库',
  'my.entry.storage.desc': '装备与 NFT',
  'my.entry.invite.title': '我的邀请',
  'my.entry.invite.desc': '邀请好友同行',
  'my.entry.member.title': '会员中心',
  'my.entry.member.desc': '尊享特权服务',
  'my.entry.member.badge.inactive': '非会员',
  'my.entry.member.badge.active': 'VIP',
  'my.entry.reports.title': '战报中心',
  'my.entry.reports.desc': '查看作战记录',
  'my.entry.highlights.title': '收藏亮点',
  'my.entry.highlights.desc': '保留精彩时刻',
  'my.highlights.section': '收藏亮点',
  'my.highlights.tag.collect': '收藏',
  'my.highlights.tag.report': '战报',
  'my.highlights.tag.reward': '奖励',
  'my.highlights.viewAll': '查看全部',
  'my.highlights.empty': '暂无收藏，稍后回来看看。',
  'my.highlights.mock1': '星际军械 Lv.3',
  'my.highlights.mock2': '战术演练 · Alpha',
  'my.highlights.mock3': '量化勋章 · ARC x80',
  'my.banner.kyc': '未实名，部分功能受限（提现、会员升级等）',
  'my.banner.kyc.cta': '去实名',
  'my.settings.section': '系统设置',
  'my.settings.kyc': '实名信息 KYC',
  'my.settings.language': '语言 Language',
  'my.settings.language.status': '当前：{lang}',
  'my.settings.notifications': '通知与战报推送',
  'my.settings.theme': '个性化外观主题',
  'my.settings.records': '资金记录',
  'my.settings.soon': '即将上线',
  'settings.title': '系统与支持',
  'settings.preferences': '偏好设置',
  'settings.account': '账户与资产',
  'settings.contact': '联系我们',
  'settings.section.preferences': '偏好设置',
  'settings.section.account': '账户与资产',
  'settings.section.support': '支持与关于',
  'settings.section.danger': '危险区域',
  'settings.language.title': '语言设置',
  'settings.language.hint': '选择界面语言，后续版本将自动同步所有文案。',
  'settings.language.apply': '应用（占位）',
  'settings.theme.title': '个性化主题',
  'settings.notifications.title': '通知设置',
  'settings.notifications.subtitle': '系统公告 / 战报推送',
  'settings.notifications.desc': '选择你想接收的推送类型，当前仅展示示例。',
  'settings.notifications.system': '系统公告',
  'settings.notifications.battle': '战报推送',
  'settings.notifications.marketing': '活动与营销',
  'settings.notifications.preview': '示例预览',
  'settings.kyc.title': '实名信息 KYC',
  'settings.kyc.verified': '已实名',
  'settings.kyc.unverified': '未实名',
  'settings.funds.title': '资金记录',
  'settings.funds.desc': '充值、提现、分红等交易即将上线，当前为占位 UI。',
  'settings.contact.twitter': 'Twitter',
  'settings.contact.telegram': 'Telegram',
  'settings.contact.email': 'Email',
  'settings.contact.website': 'Website',
  'settings.version': '版本更新',
  'settings.version.latest': '已是最新版本',
  'settings.logout': '退出登录',
  'settings.contact.error': '无法打开链接，请稍候重试',
  'rank.title': '排行榜',
  'rank.category.invite': '邀请达人',
  'rank.category.team': '团队排行',
  'rank.category.wealth': '财富榜',
  'rank.period.day': '日榜',
  'rank.period.week': '周榜',
  'rank.period.month': '月榜',
  'rank.updated': '更新时间 {time}',
  'rank.my': '我的排名',
  'rank.points': '积分',
  'rank.list.title': '榜单明细',
  'rank.podium.no1': 'NO.01',
  'rank.podium.no2': 'NO.02',
  'rank.podium.no3': 'NO.03',
  'rank.rewards.section': '赛季奖励',
  'rank.rewards.top': '巅峰荣耀',
  'rank.rewards.pro': '进阶嘉奖',
  'rank.rewards.keep': '持续激励',
  'chat.title': '团队聊天',
  'chat.placeholder': '发一条团队消息…',
  'chat.join_required': '加入团队后才能聊天',
  'chat.join_now': '加入团队',
  'chat.muted_until': '你已被禁言至 {time}',
  'chat.new_msgs': '有 {count} 条新消息 · 点击查看',
  'chat.failed': '发送失败，点击重试',
  'invite.title': '我的邀请',
  'invite.subtitle': '邀请好友加入联机，获取额外掉率与奖励。',
  'invite.total': '累计邀请',
  'invite.week': '本周邀请',
  'invite.pending': '待确认',
  'invite.code': '邀请码',
  'invite.copy': '复制',
  'invite.qrcode': '二维码',
  'invite.createLink': '生成邀请链接',
  'invite.exportReport': '导出战报',
  'invite.tabs.all': '全部',
  'invite.tabs.pending': '待确认',
  'invite.tabs.joined': '已加入',
  'invite.tabs.expired': '已过期',
  'invite.placeholder': '搜索与筛选（占位）',
  'invite.sort': '排序',
  'invite.progress.nextReward': '下一奖励',
  'invite.progress.detail': '邀请满 10 人 赠盲盒券 ×1',
  'invite.toast.copied': '已复制邀请码',
  'invite.toast.placeholder': '占位功能',
  'invite.reward.none': '暂无奖励',
  'invite.empty.title': '暂无邀请记录',
  'invite.empty.desc': '生成邀请链接，开启第一笔奖励进度。',
  'team.title': '团队',
  'team.online': '在线 {count}/{cap}',
  'team.invite': '邀请',
  'team.leave': '离队',
  'team.leave.note': '离开需费用，且24小时不参与分配',
  'team.search.placeholder': '输入成员姓名',
  'filter.all': '全部',
  'filter.online': '在线',
  'filter.offline': '离线',
  'filter.leader': '队长',
  'filter.officer': '副官',
  'member.lastSeen': '上次在线 {time}',
  'raid.title': '团队副本',
  'raid.enter': '进入副本',
  'raid.start': '开始挑战',
  'raid.progress': '已清 {cleared}/{total}',
  'raid.reset': '明日 00:00 重置',
  'maps.title': '团队地图',
  'maps.opened': '今日已开 {n} / 可开 {m}',
  'vault.title': '资产与捐献',
  'donate.now': '立即捐献',
  'team.locked': '加入团队以使用',
  'lb.title': '排行榜',
  'lb.my_rank': '我的排名',
  'lb.back_to_me': '回到我的排名',
  'lb.invite': '邀请达人',
  'lb.team': '团队排行',
  'lb.wealth': '财富榜',
  'lb.daily': '日榜',
  'lb.weekly': '周榜',
  'lb.monthly': '月榜',
  'lb.score': '积分',
  'lb.season': '赛季奖励',
  'lb.claim_now': '立即领取',
  'lb.insufficient': '进度不足',
  'lb.desc.invite': '按赛季累计邀请人数与贡献积分排名',
  'lb.desc.team': '赛季内战队总积分与团队活跃度排名',
  'lb.desc.wealth': '试炼塔/三重命运秘矿产出累计排名',
  'lb.my.diff': '距离前一名还差 {value} 分',
  'lb.reward.top1': 'TOP 1-3 · 神秘盲盒×1 + Arc×300',
  'lb.reward.top2': 'TOP 4-10 · Arc×150 + 勋章×1',
  'lb.reward.top3': 'TOP 11-20 · Arc×80 + 礼包×1',
  'lb.card.invite.primary': '邀请 {count} 人',
  'lb.card.invite.secondary': '累计积分 {score}',
  'lb.card.team.primary': '团队积分 {score}',
  'lb.card.team.secondary': '成员 {count} 人',
  'lb.card.mining.primary': '秘矿 {count}',
  'lb.card.mining.secondary': '累计积分 {score}',
  'lb.cta.invite': '邀请',
  'lb.cta.boost': '助力',
  'lb.cta.detail': '详情',
  'market.title': '集市',
  'market.subtitle': '链上实时价格脉冲 · 采购矿石/碎片/竞拍 NFT',
  'market.filter.all': '全部',
  'market.filter.ore': '矿石',
  'market.filter.shard': '碎片',
  'market.filter.nft': 'NFT',
  'market.sort.price': '价格',
  'market.sort.qty': '数量',
  'market.sort.latest': '最新',
  'market.sort.liquidity': '流动性',
  'market.sort.rarity': '稀有度',
  'market.sort.ending': '即将结束',
  'market.sort.current': '当前价',
  'market.sort.hot': '热度',
  'market.trade.quickAsk': '发布求购',
  'market.trade.viewAll': '浏览全部挂单',
  'market.trade.viewHistory': '查看成交记录',
  'market.trade.floating': '我要上架',
  'market.ticker.newListings': '今日新增挂单',
  'market.ticker.avgChange': '均价涨跌',
  'market.ticker.instantDeals': '即时成交',
  'market.section.seller': '卖家',
  'market.section.price': '价格 (ARC)',
  'market.section.qty': '数量',
  'market.section.updated': '更新时间',
  'market.section.empty': '暂无挂单，稍后再来',
  'market.nft.focus': 'NFT 焦点',
  'market.nft.pulse': '热度脉冲',
  'market.auction.primaryCta': '发起拍卖',
  'market.auction.focus': '本周焦点拍品',
  'market.auction.current': '当前竞价',
  'market.auction.endsIn': '剩余 {time}',
  'market.auction.bid': '立即出价',
  'market.auction.floating': '发起拍卖',
  'market.error.title': '暂时无法连接集市',
  'member.title': '会员中心',
  'member.non': '非会员',
  'member.status': '当前状态：{status}',
  'member.vip': '会员',
  'member.perks': '权益：掉率加成 / 盲盒折扣 / 专属头像框',
  'member.cta': '立即开通',
  'wallet.title': '资产中心',
  'wallet.topup': '充值',
  'wallet.withdraw': '提现',
  'wallet.history': '资金记录',
  'wallet.notice': '提现需实名。当前状态：{status}',
  'wallet.settle': '当日18:00统一结算',
  'wallet.empty': '还没有流水，完成一笔操作后即可查看。',
  'wallet.topup.desc': '支持链上/法币快速充值，后续版本开放。',
  'wallet.withdraw.desc': '提现将在实名通过后开放，可设定 18:00 统一结算。',
  'wallet.history.desc': '流水会在充值/提现后出现，当前暂无记录。',
  'reports.title': '战报中心',
  'reports.desc': '接入链上战报前，暂以示例条目占位。',
  'reports.cta': '导出战报',
  'reports.alert': '链上报表仍在整理，敬请期待。',
  'highlights.title': '收藏亮点',
  'highlights.desc': '未来将展示来自 Unity 的高光瞬间。',
  'kyc.title': '实名信息',
  'kyc.desc': '完成实名即可开通提现与会员升级。',
  'kyc.cta': '开始认证',
  'kyc.alert': 'KYC SDK 集成中，请稍后再试。',
  'kyc.alert.title': '实名流程',
  'my.language.sheetTitle': '选择语言',
  'my.language.toast': '语言切换功能将在后续版本上线。',
  'my.placeholder.entrySoon': '该入口即将上线，敬请期待。',
  'member.alert': '会员购买通道即将开启。',
  'my.error.title': '暂时无法加载我的数据',
  'common.notice': '提示',
  'common.cancel': '取消',
  'common.soon': '即将上线',
  'common.copy_success': '已复制',
  'common.placeholder': '占位功能',
  'common.loading': '加载中...',
} as const;

export type LocaleKey = keyof typeof zhCN;

const dictionary: Record<string, string> = zhCN;

const formatTemplate = (template: string, params?: TemplateParams) => {
  if (!params) {
    return template;
  }
  return template.replace(/\{(\w+)\}/g, (_, token: string) => {
    if (params[token] === undefined || params[token] === null) {
      return '';
    }
    return String(params[token]);
  });
};

export const translate = (
  key: LocaleKey | string,
  params?: TemplateParams | string,
  fallback?: string,
) => {
  let resolvedParams: TemplateParams | undefined;
  let resolvedFallback = fallback;

  if (typeof params === 'string') {
    resolvedFallback = fallback ?? params;
  } else {
    resolvedParams = params;
  }

  const template = dictionary[key] ?? resolvedFallback ?? key;
  return formatTemplate(template, resolvedParams);
};

export const supportedLanguages = ['zh-CN', 'en', 'vi', 'ms', 'th', 'ar', 'pt-BR'] as const;
export type SupportedLanguage = (typeof supportedLanguages)[number];

export const languageLabels: Record<SupportedLanguage, string> = {
  'zh-CN': '简体中文',
  en: 'English',
  vi: 'Tiếng Việt',
  ms: 'Bahasa Melayu',
  th: 'ไทย',
  ar: 'العربية',
  'pt-BR': 'Português (BR)',
};
